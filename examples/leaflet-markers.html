<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <title>Marcadores Personalizados en Leaflet.js con Font Awesome | Ejemplo</title>
    <meta name="description" content="Aprende a crear marcadores personalizados en Leaflet.js usando iconos de Font Awesome y L.divIcon. Ejemplo práctico con diferentes tipos de marcadores.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts: Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <!-- Prism.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" />

    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg-color: rgba(22, 22, 40, 0.7);
            --border-color: rgba(0, 170, 255, 0.3);
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(to bottom right, rgba(45, 55, 85, 0.7), var(--bg-color));
            color: #e0e0e0;
        }
        .main-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            padding: 1.5rem;
            gap: 1.5rem;
        }
        h1 {
            text-align: center;
            margin: 0 0 1rem 0;
            flex-shrink: 0;
            color: #fff;
        }
        .info-text {
            text-align: center;
            color: var(--subtle-text-color, #a0a0c0);
            margin-top: -1rem;
            margin-bottom: 1.5rem;
        }
        .info-text a {
            color: var(--primary-color, #00aaff);
            text-decoration: none;
        }
        .info-text a:hover {
            text-decoration: underline;
        }
        .card {
            background-color: var(--card-bg-color);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            overflow: hidden;
            display: flex;
        }
        .map-card {
            flex: 1 1 55%; /* Proporción estándar */
            min-height: 300px; /* Altura mínima para asegurar visibilidad del mapa */
        }
        .code-card {
            flex: 1 1 45%; /* Proporción estándar */
        }
        #map, .code-container {
            width: 100%;
            height: 100%;
        }
        .code-container {
            overflow: auto;
            background-color: #272822;
        }
        pre[class*="language-"] {
            font-size: 0.9em;
            margin: 0;
            height: 100%;
        }
        /* Forzar la visibilidad constante del botón de copiar */
        div.code-toolbar .toolbar {
            opacity: 1;
        }
        /* Estilos específicos para los iconos personalizados */
        .custom-marker {
            background-color: rgba(255, 255, 255, 0.8);
            border: 2px solid #007bff;
            border-radius: 50%;
            width: 30px !important;
            height: 30px !important;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .custom-marker i {
            color: #007bff;
            font-size: 16px;
        }
        /* Colores específicos para tipos */
        .custom-marker.playa i { color: #00aaff; } /* Azul claro */
        .custom-marker.parque i { color: #28a745; } /* Verde */
        .custom-marker.faro i { color: #ffc107; } /* Amarillo */
    </style>
</head>
<body>

<div class="main-container">
    <h1>Marcadores Personalizados con Font Awesome</h1>
    <p class="info-text">Este ejemplo carga y visualiza los datos del fichero <a href="../data/oleiros.geojson" download>oleiros.geojson</a>.</p>
    
    <div class="card map-card">
        <div id="map"></div>
    </div>

    <div class="card code-card">
        <div class="code-container">
            <pre data-copy="Copiar" data-copy-success="Copiado!"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="es"&gt;
&lt;head&gt;
    &lt;meta charset="utf-8" /&gt;
    &lt;title&gt;Leaflet - Marcadores Personalizados&lt;/title&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    
    &lt;!-- Leaflet CSS --&gt;
    &lt;link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" /&gt;

    &lt;!-- Font Awesome CSS --&gt;
    &lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"&gt;

    &lt;style&gt;
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
        }
        h1 {
            text-align: center;
            margin: 1rem 0;
            flex-shrink: 0;
        }
        #map {
            height: 100%; /* Ocupa todo el espacio disponible */
            flex-grow: 1;
        }
        /* Estilos para los iconos personalizados */
        .custom-marker {
            background-color: rgba(255, 255, 255, 0.8);
            border: 2px solid #007bff;
            border-radius: 50%;
            width: 30px !important;
            height: 30px !important;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .custom-marker i {
            color: #007bff;
            font-size: 16px;
        }
        /* Colores específicos para tipos */
        .custom-marker.playa i { color: #00aaff; } /* Azul claro */
        .custom-marker.parque i { color: #28a745; } /* Verde */
        .custom-marker.faro i { color: #ffc107; } /* Amarillo */
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h1&gt;Marcadores Personalizados con Font Awesome&lt;/h1&gt;
&lt;div id="map"&gt;&lt;/div&gt;

&lt;!-- Leaflet JS --&gt;
&lt;script src="https://unpkg.com/leaflet/dist/leaflet.js"&gt;&lt;/script&gt;
&lt;script&gt;
    // Inicializar el mapa
    var map = L.map('map').setView([43.3336, -8.3174], 13); // Centro inicial en Oleiros

    // Añadir capa base de CartoDB Positron
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        attribution: '&amp;copy; &lt;a href="https://www.openstreetmap.org/copyright"&gt;OpenStreetMap&lt;/a&gt; contributors &amp;copy; &lt;a href="https://carto.com/attributions"&gt;CARTO&lt;/a&gt;'
    }).addTo(map);

    // Cargar el GeoJSON
    fetch('../data/oleiros.geojson')
        .then(response =&gt; response.json())
        .then(data =&gt; {
            var markers = L.geoJSON(data, {
                pointToLayer: function (feature, latlng) {
                    var iconClass;
                    var markerColorClass = '';

                    switch (feature.properties.tipo) {
                        case 'Playa':
                            iconClass = 'fa-umbrella-beach';
                            markerColorClass = 'playa';
                            break;
                        case 'Parque':
                            iconClass = 'fa-tree';
                            markerColorClass = 'parque';
                            break;
                        case 'Faro':
                            iconClass = 'fa-lightbulb';
                            markerColorClass = 'faro';
                            break;
                        default:
                            iconClass = 'fa-map-marker-alt'; // Icono por defecto
                            break;
                    }

                    var customIcon = L.divIcon({
                        className: 'custom-marker ' + markerColorClass,
                        html: '<i class="fa-solid ' + iconClass + '"></i>',
                        iconSize: [30, 30] // Tamaño del divIcon
                    });

                    return L.marker(latlng, { icon: customIcon })
                               .bindPopup('<b>' + feature.properties.name + '</b>&lt;br&gt;Tipo: ' + feature.properties.tipo);
                }
            }).addTo(map);

            // Ajustar el mapa para que se vean todos los marcadores
            map.fitBounds(markers.getBounds());
        });
&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
        </div>
    </div>
</div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
    // Inicializar el mapa
    var map = L.map('map').setView([43.3336, -8.3174], 13); // Centro inicial en Oleiros

    // Añadir capa base de CartoDB Positron
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'
    }).addTo(map);

    // Cargar el GeoJSON
    fetch('../data/oleiros.geojson')
        .then(response => response.json())
        .then(data => {
            var markers = L.geoJSON(data, {
                pointToLayer: function (feature, latlng) {
                    var iconClass;
                    var markerColorClass = '';

                    switch (feature.properties.tipo) {
                        case 'Playa':
                            iconClass = 'fa-umbrella-beach';
                            markerColorClass = 'playa';
                            break;
                        case 'Parque':
                            iconClass = 'fa-tree';
                            markerColorClass = 'parque';
                            break;
                        case 'Faro':
                            iconClass = 'fa-lightbulb';
                            markerColorClass = 'faro';
                            break;
                        default:
                            iconClass = 'fa-map-marker-alt'; // Icono por defecto
                            break;
                    }

                    var customIcon = L.divIcon({
                        className: 'custom-marker ' + markerColorClass,
                        html: '<i class="fa-solid ' + iconClass + '"></i>',
                        iconSize: [30, 30] // Tamaño del divIcon
                    });

                    return L.marker(latlng, { icon: customIcon })
                               .bindPopup('<b>' + feature.properties.name + '</b><br>Tipo: ' + feature.properties.tipo);
                }
            }).addTo(map);

            // Ajustar el mapa para que se vean todos los marcadores
            map.fitBounds(markers.getBounds());
        });
</script>

<!-- Prism.js JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-clike.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
<script>Prism.highlightAll();</script>

</body>
</html>
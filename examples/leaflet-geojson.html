<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Cómo Cargar un GeoJSON en Leaflet.js | Ejemplo Práctico</title>
    <meta name="description" content="Aprende a cargar y visualizar datos desde un fichero GeoJSON en un mapa interactivo con Leaflet.js. Ejemplo práctico con un mapa de Oleiros.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" />

    <style>
        :root {
            --bg-color: #1a1a2e;
            --card-bg-color: rgba(22, 22, 40, 0.7);
            --border-color: rgba(0, 170, 255, 0.3);
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(to bottom right, rgba(45, 55, 85, 0.7), var(--bg-color));
            color: #e0e0e0;
        }
        .main-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            padding: 1.5rem;
            gap: 1.5rem;
        }
        h1 {
            text-align: center;
            margin: 0 0 1rem 0;
            flex-shrink: 0;
            color: #fff;
        }
        .info-text {
            text-align: center;
            color: var(--subtle-text-color, #a0a0c0);
            margin-top: -1rem;
            margin-bottom: 1.5rem;
        }
        .info-text a {
            color: var(--primary-color, #00aaff);
            text-decoration: none;
        }
        .info-text a:hover {
            text-decoration: underline;
        }
        .card {
            background-color: var(--card-bg-color);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            overflow: hidden;
            display: flex;
        }
        .map-card {
            flex: 1 1 55%;
            min-height: 300px; /* Altura mínima para asegurar visibilidad del mapa */
        }
        .code-card {
            flex: 1 1 45%;
        }
        #map, .code-container {
            width: 100%;
            height: 100%;
        }
        .code-container {
            overflow: auto;
            background-color: #272822;
        }
        pre[class*="language-"] {
            font-size: 0.9em;
            margin: 0;
            height: 100%;
        }
        /* Forzar la visibilidad constante del botón de copiar */
        div.code-toolbar .toolbar {
            opacity: 1;
        }
    </style>
</head>
<body>

<div class="main-container">
    <h1>Mapa de Oleiros con GeoJSON</h1>
    <p class="info-text">Este ejemplo carga y visualiza los datos del fichero <a href="../data/oleiros.geojson" download>oleiros.geojson</a>.</p>
    
    <div class="card map-card">
        <div id="map"></div>
    </div>

    <div class="card code-card">
        <div class="code-container">
            <pre data-copy="Copiar" data-copy-success="Copiado!"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="utf-8" /&gt;
    &lt;title&gt;Leaflet con GeoJSON&lt;/title&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;

    &lt;link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" /&gt;
    &lt;style&gt;#map { height: 500px; }&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h1&gt;Mapa de Oleiros con GeoJSON&lt;/h1&gt;
&lt;div id="map"&gt;&lt;/div&gt;

&lt;script src="https://unpkg.com/leaflet/dist/leaflet.js"&gt;&lt;/script&gt;
&lt;script&gt;
    // Inicializar el mapa en Oleiros
    var map = L.map('map').setView([43.3336, -8.3174], 13);

    // Capa base OSM
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&amp;copy; OpenStreetMap contributors'
    }).addTo(map);

    // Cargar un GeoJSON desde archivo
    fetch('../data/oleiros.geojson')
        .then(response =&gt; response.json())
        .then(data =&gt; {
            L.geoJSON(data, {
                style: {
                    color: 'blue',
                    weight: 2,
                    fillOpacity: 0.1
                },
                onEachFeature: function (feature, layer) {
                    if (feature.properties &amp;&amp; feature.properties.name) {
                        layer.bindPopup("Nombre: " + feature.properties.name);
                    }
                }
            }).addTo(map);
        });
&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
        </div>
    </div>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
    var map = L.map('map').setView([43.3336, -8.3174], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);
    fetch('../data/oleiros.geojson')
        .then(response => response.json())
        .then(data => {
            L.geoJSON(data, {
                style: {
                    color: 'blue',
                    weight: 2,
                    fillOpacity: 0.1
                },
                onEachFeature: function (feature, layer) {
                    if (feature.properties && feature.properties.name) {
                        layer.bindPopup("Nombre: " + feature.properties.name);
                    }
                }
            }).addTo(map);
        });
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-clike.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
<script>Prism.highlightAll();</script>

</body>
</html>
